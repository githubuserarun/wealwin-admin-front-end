{"ast":null,"code":"var _jsxFileName = \"/home/dev/Arun/Task/interview/Task_2/Admin_frontend/src/Components/AdminLoginPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { FaRegEyeSlash, FaRegEye } from \"react-icons/fa\";\nimport Cookies from 'js-cookie';\nimport { useNavigate, Link } from 'react-router-dom';\nimport './Form.css';\nimport { toast } from 'react-toastify';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AdminLoginPage = () => {\n  _s();\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [isPassShow, setIsPassShow] = useState(false);\n  const navigate = useNavigate();\n  const isUser = Cookies.get('jwtToken');\n  const isAdmin = Cookies.get('jwtAdminToken');\n  const handleLogin = async e => {\n    e.preventDefault();\n    try {\n      const response = await fetch('http://localhost:5000/api/auth/login', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          username,\n          password\n        })\n      });\n      if (!response.ok) {\n        const errorData = await response.json();\n        toast.error(errorData.msg);\n        return;\n      }\n      const data = await response.json();\n      console.log('Login successful, JWT token:', data.token);\n      toast.success(\"Login successful\");\n      const jwtToken = data.token;\n      if (data.admin) {\n        Cookies.set('jwtAdminToken', jwtToken, {\n          expires: 3\n        });\n      } else {\n        Cookies.set('jwtToken', jwtToken, {\n          expires: 3\n        });\n      }\n      setUsername('');\n      setPassword('');\n      console.log(data);\n      if (data.admin) {\n        navigate('/admin-dash');\n      } else {\n        navigate('/');\n      }\n    } catch (error) {\n      console.error('Login failed:', error.message);\n    }\n  };\n  const navToSignup = () => {\n    navigate('/signup');\n  };\n  const togglePassword = () => {\n    setIsPassShow(!isPassShow);\n  };\n  useEffect(() => {\n    if (isAdmin !== undefined) {\n      navigate('/admin-dash');\n    }\n    if (isUser !== undefined) {\n      navigate('/');\n    }\n  }, [navigate]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container d-flex justify-content-between align-items-center\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-container d-flex flex-column justify-content-around\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"AdmLogin\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleLogin,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"input\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Username\",\n            value: username,\n            onChange: e => setUsername(e.target.value),\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"password \",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: isPassShow ? 'text' : 'password',\n            placeholder: \"Password\",\n            value: password,\n            onChange: e => setPassword(e.target.value),\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"icon\",\n            onClick: togglePassword,\n            children: isPassShow ? /*#__PURE__*/_jsxDEV(FaRegEyeSlash, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 29\n            }, this) : /*#__PURE__*/_jsxDEV(FaRegEye, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 49\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          className: \"link text-end mt-3 mb-3\",\n          to: \"/request\",\n          children: \"forgot password?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"mt-2 bg-warning text-dark\",\n          onClick: navToSignup,\n          children: \"Are You New User?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, this);\n};\n_s(AdminLoginPage, \"mlXchSL8IKgiITeLeQrLveeJ/U8=\", false, function () {\n  return [useNavigate];\n});\n_c = AdminLoginPage;\nexport default AdminLoginPage;\nvar _c;\n$RefreshReg$(_c, \"AdminLoginPage\");","map":{"version":3,"names":["React","useState","useEffect","FaRegEyeSlash","FaRegEye","Cookies","useNavigate","Link","toast","jsxDEV","_jsxDEV","AdminLoginPage","_s","username","setUsername","password","setPassword","isPassShow","setIsPassShow","navigate","isUser","get","isAdmin","handleLogin","e","preventDefault","response","fetch","method","headers","body","JSON","stringify","ok","errorData","json","error","msg","data","console","log","token","success","jwtToken","admin","set","expires","message","navToSignup","togglePassword","undefined","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","placeholder","value","onChange","target","required","onClick","to","_c","$RefreshReg$"],"sources":["/home/dev/Arun/Task/interview/Task_2/Admin_frontend/src/Components/AdminLoginPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { FaRegEyeSlash, FaRegEye } from \"react-icons/fa\";\nimport Cookies from 'js-cookie';\nimport { useNavigate, Link } from 'react-router-dom';\nimport './Form.css';\nimport { toast } from 'react-toastify';\n\nconst AdminLoginPage = () => {\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [isPassShow, setIsPassShow] = useState(false);\n\n  const navigate = useNavigate();\n  const isUser = Cookies.get('jwtToken');\n  const isAdmin = Cookies.get('jwtAdminToken')\n\n  const handleLogin = async (e) => {\n    e.preventDefault();\n\n    try {\n      const response = await fetch('http://localhost:5000/api/auth/login', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ username, password }),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        toast.error(errorData.msg);\n        return;\n      }\n\n      const data = await response.json();\n      console.log('Login successful, JWT token:', data.token);\n      toast.success(\"Login successful\")\n\n      const jwtToken = data.token;\n      if (data.admin) {\n        Cookies.set('jwtAdminToken', jwtToken, { expires: 3 });\n      }\n      else {\n        Cookies.set('jwtToken', jwtToken, { expires: 3 });\n      }\n\n\n      setUsername('');\n      setPassword('');\n      console.log(data)\n      if (data.admin) {\n        navigate('/admin-dash');\n      } else {\n        navigate('/');\n      }\n\n    } catch (error) {\n      console.error('Login failed:', error.message);\n    }\n  };\n\n  const navToSignup = () => {\n    navigate('/signup')\n  }\n  const togglePassword = () => {\n    setIsPassShow(!isPassShow);\n  }\n\n  useEffect(() => {\n    if (isAdmin !== undefined) {\n      navigate('/admin-dash')\n    }\n    if (isUser !== undefined) {\n      navigate('/')\n    }\n  }, [navigate]);\n\n  return (\n    <div className='container d-flex justify-content-between align-items-center'>\n      <div className=\"form-container d-flex flex-column justify-content-around\">\n        <h2>AdmLogin</h2>\n        <form onSubmit={handleLogin}>\n          <div className='input'>\n            <input\n              type=\"text\"\n              placeholder=\"Username\"\n              value={username}\n              onChange={(e) => setUsername(e.target.value)}\n              required\n            />\n\n          </div>\n\n          <div className='password '>\n            <input\n              type={isPassShow ? 'text' : 'password'}\n              placeholder=\"Password\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              required\n            />\n            <button type='button' className='icon' onClick={togglePassword}>\n              {isPassShow ? <FaRegEyeSlash /> : <FaRegEye />}</button>\n\n          </div>\n          <Link className='link text-end mt-3 mb-3' to='/request'>forgot password?</Link>\n\n          <button type=\"submit\">Login</button>\n          <button className='mt-2 bg-warning text-dark' onClick={navToSignup}>Are You New User?</button>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default AdminLoginPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}